{% comment %}
Comment form partial - for adding new comments
Context: post, club, error (optional)
{% endcomment %}
<form 
    hx-post="{% url 'posts:add_comment' slug=club.slug post_id=post.id %}"
    hx-target="#comments-section"
    hx-swap="beforeend"
    hx-on::after-request="this.reset(); this.querySelector('textarea').style.height = 'auto';"
    class="relative">
    {% csrf_token %}
    
    <div class="flex gap-3 sm:gap-4">
        <!-- User avatar -->
        <div class="flex-shrink-0">
            <div class="w-10 h-10 sm:w-11 sm:h-11 rounded-full bg-primary-100 text-primary-700 flex items-center justify-center shadow-md ring-2 ring-primary-100">
                <span class="font-bold text-sm sm:text-base">
                    {{ user.username|slice:":1"|upper }}
                </span>
            </div>
        </div>
        
        <!-- Input area -->
        <div class="flex-1 min-w-0">
            <div class="relative bg-white rounded-2xl border-2 border-gray-200 focus-within:border-primary-400 focus-within:shadow-lg transition-all duration-300">
                <textarea 
                    name="body" 
                    rows="1" 
                    placeholder="Write something nice..."
                    required
                    oninput="this.style.height = 'auto'; this.style.height = this.scrollHeight + 'px';"
                    class="w-full px-4 py-3 text-sm sm:text-base text-gray-700 bg-transparent rounded-2xl focus:outline-none resize-none placeholder-gray-400 min-h-[48px] max-h-[200px]"></textarea>
                
                <!-- Action row -->
                <div class="flex items-center justify-between px-3 py-2 border-t border-gray-100">
                    <!-- Emoji hint -->
                    <div class="flex items-center gap-2 text-gray-400 text-sm">
                        <i class="far fa-smile text-gray-400"></i>
                        <span class="hidden sm:inline text-xs text-gray-400">Be kind and respectful</span>
                    </div>
                    
                    <!-- Submit button -->
                    <button 
                        type="submit"
                        class="inline-flex items-center gap-2 px-4 sm:px-5 py-2 bg-primary-500 text-white text-sm font-semibold rounded-full hover:bg-primary-600 transition-all duration-300 shadow-md hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0">
                        <span class="hidden sm:inline">Post</span>
                        <i class="fas fa-paper-plane text-xs"></i>
                    </button>
                </div>
            </div>
            
            {% if error %}
            <div class="mt-2 flex items-center gap-2 text-red-500 text-sm">
                <i class="fas fa-exclamation-circle text-red-500"></i>
                <span>{{ error }}</span>
            </div>
            {% endif %}
        </div>
    </div>
</form>
